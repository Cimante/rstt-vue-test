(function(t){function e(e){for(var a,o,i=e[0],l=e[1],c=e[2],f=0,d=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/rstt-vue-test/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"32f6":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"container",attrs:{id:"table"}},[n("div",{staticClass:"row mt-3 mb-3"},[n("div",{staticClass:"col-6 offset-3"},[n("Modal")],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-6 offset-3"},[n("Table")],1)])])])},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table table-hover table-sm"},[n("thead",[n("tr",t._l(t.tableFields,(function(e,a){return n("th",{key:a,attrs:{scope:"col"},on:{click:function(n){return t.sortTable(e)}}},[n("span",[t._v(t._s(e))]),t.field===e&&1===t.direction?n("span",[t._v(" ▼")]):t._e(),t.field===e&&-1===t.direction?n("span",[t._v(" ▲")]):t._e()])})),0)]),n("tbody",[t._l(t.tableData,(function(e,a){return[n("tr",{key:a},[e.subordinates?n("td",[t._v("+ "+t._s(e.name))]):n("td",[t._v(t._s(e.name))]),n("td",[t._v(t._s(e.phone))])]),t._l(e.subordinates,(function(e,a){return n("tr",{key:e.name+a,staticClass:"table__subordinate"},[n("td",[t._v("+ "+t._s(e.name))]),n("td",[t._v(t._s(e.phone))])])}))]}))],2)])},i=[],l={name:"Table",computed:{tableData:function(){return this.$store.getters.getTable}},data:function(){return{tableFields:["Имя","Телефон"],field:"",direction:1}},methods:{sortTable:function(t){this.$store.state.table&&(this.field===t?this.direction*=-1:(this.field=t,this.direction=1),this.$store.dispatch("sortTable",this.field))}}},c=l,u=(n("ec00"),n("2877")),f=Object(u["a"])(c,o,i,!1,null,null,null),d=f.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"modal-container"}},[n("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){t.isModalShow=!0}}},[t._v("Добавить")]),t.isModalShow?n("div",{staticClass:"modal__mask"},[n("div",{staticClass:"modal__wrapper",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.isModalShow=!1}}},[n("section",{staticClass:"modal__content"},[n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("h5",[t._v("Добавление пользователя")]),n("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(e){t.isModalShow=!1}}},[t._v("×")])]),n("form",{staticClass:"mt-3",on:{submit:function(e){e.preventDefault(),t.sendUserData(),t.clearUserInputs(),t.isModalShow=!1}}},[n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label form-label-sm",attrs:{for:"form-name"}},[t._v("Имя:")]),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.name,expression:"name",modifiers:{lazy:!0}}],staticClass:"form-control form-control-sm",attrs:{id:"form-name",type:"text",required:""},domProps:{value:t.name},on:{change:function(e){t.name=e.target.value}}})]),n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label form-label-sm",attrs:{for:"form-phone"}},[t._v("Телефон:")]),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.phone,expression:"phone",modifiers:{lazy:!0}}],staticClass:"form-control form-control-sm",attrs:{id:"form-phone",type:"text",required:""},domProps:{value:t.phone},on:{change:function(e){t.phone=e.target.value}}})]),n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label form-label-sm",attrs:{for:"form-chief"}},[t._v("Начальник:")]),n("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.chief,expression:"chief",modifiers:{lazy:!0}}],staticClass:"form-select form-select-sm",attrs:{name:"form-chief",id:"form-chief"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.chief=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:"0"}},[t._v("Выберите один из вариантов")]),t._l(t.users,(function(e,a){return n("option",{key:a,domProps:{value:e.id}},[t._v(t._s(e.name)+" ("+t._s(e.phone)+")")])}))],2)]),n("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit"}},[t._v("Сохранить")])])])])]):t._e()])},p=[],b=(n("b0c0"),{name:"Modal",data:function(){return{isModalShow:!1,name:"",phone:"",chief:null}},computed:{users:function(){return this.$store.getters.getTable}},methods:{sendUserData:function(){this.chief?this.$store.dispatch("sendUserData",{name:this.name,phone:this.phone,chief:this.chief}):this.$store.dispatch("sendUserData",{name:this.name,phone:this.phone})},clearUserInputs:function(){this.name="",this.phone="",this.chief=null},selectChanged:function(t){console.log(t.target.value)}}}),h=b,v=(n("f01e"),Object(u["a"])(h,m,p,!1,null,null,null)),_=v.exports,y={name:"App",components:{Table:d,Modal:_}},g=y,C=(n("034f"),Object(u["a"])(g,s,r,!1,null,null,null)),w=C.exports,O=n("2909"),j=(n("99af"),n("d81d"),n("4e82"),n("2f62")),x=n("0e44");a["a"].use(j["a"]);var S=new j["a"].Store({state:{table:[],usersCounter:0},mutations:{addUserData:function(t,e){t.table=[].concat(Object(O["a"])(t.table),[e])},increaseUsersCounter:function(t){t.usersCounter=t.usersCounter+1},addSubordinate:function(t,e){t.table=t.table.map((function(t){return e.chief===t.id&&(t.subordinates||(t.subordinates=new Array),t.subordinates.push(e)),t}))},reassignUserData:function(t,e){t.table=e}},actions:{sendUserData:function(t,e){var n=t.state,a=t.commit;a("increaseUsersCounter"),e.id=n.usersCounter,e.chief?a("addSubordinate",e):a("addUserData",e)},sortTable:function(t,e){var n=t.state,a=t.commit,s=n.table;s.sort((function(t,n){return t[e]>n[e]?1:-1})),a("reassignUserData",s)}},getters:{getTable:function(t){return t.table}},plugins:[Object(x["a"])()]});a["a"].config.productionTip=!1,new a["a"]({store:S,render:function(t){return t(w)}}).$mount("#app")},"85ec":function(t,e,n){},9539:function(t,e,n){},ec00:function(t,e,n){"use strict";n("32f6")},f01e:function(t,e,n){"use strict";n("9539")}});
//# sourceMappingURL=app.2fe16b8f.js.map